test_that("layer_to_matrix small", {
  expect_equal({
    data(dem)
    dem1 = layer_to_matrix(dem)
  },
  structure(
    c(
      171,
      189,
      204,
      208,
      208,
      209,
      207,
      200,
      191,
      173,
      155,
      140,
      167,
      185,
      199,
      207,
      210,
      206,
      198,
      183,
      166,
      152,
      115,
      140,
      166,
      183,
      203,
      211,
      208,
      197,
      184,
      168,
      153,
      64,
      86,
      108,
      141,
      167,
      207,
      211,
      203,
      188,
      174,
      155,
      44,
      60,
      86,
      115,
      139,
      162,
      185,
      204,
      198,
      191,
      175,
      31,
      43,
      62,
      91,
      112,
      140,
      167,
      188,
      196,
      191,
      177,
      16,
      27,
      41,
      64,
      93,
      117,
      141,
      161,
      181,
      186,
      179,
      6,
      14,
      20,
      34,
      64,
      91,
      112,
      139,
      158,
      173,
      183,
      4,
      4,
      5,
      15,
      39,
      69,
      87,
      113,
      135,
      163,
      166,
      2,
      5,
      5,
      7,
      8,
      27,
      63,
      88,
      109,
      120,
      121,
      0,
      0,
      4,
      5,
      3,
      2,
      6,
      11,
      69,
      95,
      109,
      1,
      -2,
      5,
      7,
      4,
      1,
      1,
      1,
      10,
      26,
      32,
      2,
      5,
      6,
      6,
      5,
      5,
      3,
      2,
      4,
      5,
      15
    ),
    .Dim = c(11L,
             13L)
  )
)})
